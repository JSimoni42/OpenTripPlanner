dist: trusty # jdk 8 not available on xenial
language: java
# OpenTripPlanner requires Java 8 and Travis doesn't (yet) support OpenJDK 8
jdk:
  - oraclejdk8
  
# Replace Travis's default Maven installation step with a no-op.
# This avoids redundantly pre-running 'mvn install -DskipTests' every time.
install: true

# Replace Travis's default build step.
# Only run the test suite
script:  mvn clean verify --settings maven-settings.xml -B -V -Dgpg.skip

# Secure envs are OSSRH_JIRA_USERNAME, OSSRH_JIRA_PASSWORD, GPG_KEY_NAME, GPG_PASSPHRASE
env:
  global:
  - JAVA_OPTS=-Xmx2g

# If sudo is disabled, CI runs on container based infrastructure (allows caching &c.)
sudo: false

# Retain the local Maven repository to speed up builds.
cache:
  directories:
    - $HOME/.m2/repository

# Notify us of the build status on the Slack channel
notifications:
  webhooks: https://outlook.office.com/webhook/03fa4a79-572f-4c68-b756-e4e851d0215a@9093f1a3-8771-4fb7-8596-d51eeef18cda/TravisCI/0aec73ecb8eb4ad696ea27dd3c6a102d/286c079f-6085-4aa0-8f8d-e2a3e8d1f568